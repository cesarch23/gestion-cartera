"use strict";(self.webpackChunkgestion_cartera=self.webpackChunkgestion_cartera||[]).push([[617],{3617:(w,u,a)=>{a.r(u),a.d(u,{AuthModule:()=>k});var c=a(177),s=a(9012),n=a(9417),f=a(6029),t=a(7705),h=a(3767),C=a(5416),g=a(9631),l=a(882),p=a(8834);function _(e,m){1&e&&(t.j41(0,"span"),t.EFF(1,"Iniciar sesi\xf3n"),t.k0s())}function x(e,m){1&e&&t.nrm(0,"span",16)}let F=(()=>{class e{constructor(r,o,i){this.router=r,this.authService=o,this.toastRef=i,this.status="init",this.loginForm=new n.gE({ruc:new n.MJ(null,[n.k0.required,n.k0.minLength(11),n.k0.maxLength(11)]),password:new n.MJ(null,[n.k0.required])})}openToast(r,o){this.toastRef.openFromComponent(f.d,{data:{message:r,type:o},duration:3e3,verticalPosition:"top",horizontalPosition:"right"})}login(){if(this.loginForm.markAllAsTouched(),this.loginForm.invalid)return;const{ruc:r,password:o}=this.loginForm.value;this.status="loading",this.authService.login({ruc:r,password:o}).subscribe({next:i=>{i&&this.router.navigateByUrl("/app/portfolio"),i||this.openToast("Su RUC o contrase\xf1a son incorrectos, vuelva a revisarlos","failed")},error:i=>{this.status="failed",this.openToast("El usuario no existe","failed")},complete:()=>{this.status="init"}})}static{this.\u0275fac=function(o){return new(o||e)(t.rXU(s.Ix),t.rXU(h.u),t.rXU(C.UG))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-login"]],decls:31,vars:4,consts:[[1,"content"],[1,"login"],[1,"login__title"],["action","#",1,"form",3,"formGroup","ngSubmit"],["appearance","fill","color","primary",1,"form__field"],["formControlName","ruc","matInput","","type","text","placeholder","Ingrese su RUC","maxlength","11"],["appearance","fill",1,"form__field"],["formControlName","password","matInput","","type","password","placeholder","Ingrese su contrase\xf1a"],["mat-button","","mat-flat-button","","type","submit","color","primary",1,"form__submit",3,"disabled"],[4,"ngIf"],["class","loader",4,"ngIf"],[1,"form__or"],[1,"login__options"],["routerLink","/auth/register"],[1,"image"],["src","assets/images/login.png","alt","login image"],[1,"loader"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),t.EFF(4,"Bienvenido"),t.k0s(),t.j41(5,"span"),t.EFF(6,"Por favor ingrese sus datos"),t.k0s()(),t.j41(7,"form",3),t.bIt("ngSubmit",function(){return i.login()}),t.j41(8,"mat-form-field",4)(9,"mat-label"),t.EFF(10,"RUC"),t.k0s(),t.nrm(11,"input",5),t.k0s(),t.j41(12,"mat-form-field",6)(13,"mat-label"),t.EFF(14,"Contrase\xf1a"),t.k0s(),t.nrm(15,"input",7),t.k0s(),t.j41(16,"button",8),t.DNE(17,_,2,0,"span",9),t.DNE(18,x,1,0,"span",10),t.k0s(),t.j41(19,"div",11),t.nrm(20,"hr"),t.j41(21,"span"),t.EFF(22," O "),t.k0s(),t.nrm(23,"hr"),t.k0s()(),t.j41(24,"div",12)(25,"p"),t.EFF(26,"\xbfNo tienes una cuenta?"),t.k0s(),t.j41(27,"a",13),t.EFF(28,"Reg\xedstrate"),t.k0s()()(),t.j41(29,"div",14),t.nrm(30,"img",15),t.k0s()()),2&o&&(t.R7$(7),t.Y8G("formGroup",i.loginForm),t.R7$(9),t.Y8G("disabled","loading"===i.status),t.R7$(1),t.Y8G("ngIf","loading"!==i.status),t.R7$(1),t.Y8G("ngIf","loading"===i.status))},dependencies:[c.bT,s.Wk,n.qT,n.me,n.BC,n.cb,n.tU,n.j4,n.JD,g.fg,l.rl,l.nJ,p.$z],styles:[".content[_ngcontent-%COMP%]{width:90%;max-width:1200px;margin:0 auto;display:flex;justify-content:center;align-items:center;gap:2rem;height:100%}.login[_ngcontent-%COMP%]{grid-column-start:1;grid-column-end:3;width:100%;max-width:464px;display:flex;flex-direction:column;padding:0 64px;flex-grow:1;gap:32px}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.form[_ngcontent-%COMP%]   .form__field[_ngcontent-%COMP%]{display:block;width:100%;flex-grow:1}.form[_ngcontent-%COMP%]   .form__field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.form[_ngcontent-%COMP%]   .form__submit[_ngcontent-%COMP%]{background-color:#3566e7;margin-bottom:20px}.form[_ngcontent-%COMP%]   .form__submit.disabled[_ngcontent-%COMP%]{cursor:not-allowed}.form[_ngcontent-%COMP%]   .form__submit.undisabled[_ngcontent-%COMP%]{cursor:pointer}.form__or[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center}.form__or[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{flex-grow:1;flex-shrink:1}.form__or[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 8px}.login__options[_ngcontent-%COMP%]{display:flex;gap:8px}.login__options[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;color:var(--primary-color)}.image[_ngcontent-%COMP%], .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:none}@media (width>=728px){.content[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:0}.login[_ngcontent-%COMP%]{grid-column-start:1;grid-column-end:2}.image[_ngcontent-%COMP%]{position:absolute;right:0;z-index:-100;width:55%;display:block;overflow:hidden;max-width:800.375px;height:100%;box-shadow:-27px 0 44.1px -13px #3a6beb5c}.image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;width:100%;height:100%;object-fit:cover}}.loader[_ngcontent-%COMP%]{width:30px;height:30px;border:5px solid #FFF;border-bottom-color:#72ffdf;border-radius:50%;display:inline-block;box-sizing:border-box;animation:_ngcontent-%COMP%_rotation 1s linear infinite}@keyframes _ngcontent-%COMP%_rotation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})}}return e})();function M(e,m){1&e&&(t.j41(0,"span"),t.EFF(1,"Cargando..."),t.k0s())}function b(e,m){1&e&&(t.j41(0,"span"),t.EFF(1,"Registrarse"),t.k0s())}function P(e,m){1&e&&(t.j41(0,"span"),t.EFF(1,"Ocurrio un error en nuestro servidor, intentelo m\xe1s tarde"),t.k0s())}const O=[{path:"",component:(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-layout-auth"]],decls:1,vars:0,template:function(o,i){1&o&&t.nrm(0,"router-outlet")},dependencies:[s.n3],encapsulation:2})}}return e})(),children:[{path:"login",component:F},{path:"register",component:(()=>{class e{constructor(r,o,i){this.authService=r,this.router=o,this.toastRef=i,this.requestStatus="init",this.registerForm=new n.gE({ruc:new n.MJ(null,[n.k0.required,n.k0.minLength(11)]),razonSocial:new n.MJ(null,[n.k0.required]),direccion:new n.MJ(null,[n.k0.required]),sector:new n.MJ(null,[n.k0.required]),password:new n.MJ(null,[n.k0.required])})}register(){if(this.registerForm.markAllAsTouched(),this.registerForm.invalid)return;this.requestStatus="loading";const{ruc:r,razonSocial:o,direccion:i,sector:d,password:v}=this.registerForm.value;this.authService.registerCompany({ruc:r,razon_social:o,direccion:i,sector:d,password:v}).subscribe({next:()=>{this.authService.saveUser(r),this.router.navigateByUrl("/app/portfolio")},error:R=>{this.toastRef.openFromComponent(f.d,{data:{message:"Ocurrio un error en nuestro servidor, intentelo m\xe1s tarde",type:"failed"},duration:3e3,verticalPosition:"top",horizontalPosition:"right"}),this.requestStatus="failed"},complete:()=>{this.requestStatus="init"}})}static{this.\u0275fac=function(o){return new(o||e)(t.rXU(h.u),t.rXU(s.Ix),t.rXU(C.UG))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-register"]],decls:44,vars:5,consts:[[1,"content"],[1,"login"],[1,"login__title"],["action","#",1,"form",3,"formGroup","ngSubmit"],["appearance","fill","color","primary",1,"form__field"],["formControlName","ruc","matInput","","type","text","placeholder","Ingrese el RUC de su empresa","maxlength","11"],["appearance","fill",1,"form__field"],["formControlName","razonSocial","matInput","","type","text","placeholder","Ingrese la razon social"],["formControlName","direccion","matInput","","type","text","placeholder","Ingrese la direccion legal"],["formControlName","sector","matInput","","type","text","placeholder","Ingrese el sector al que pertenece"],["formControlName","password","matInput","","type","password","placeholder","Ingrese su contrase\xf1a"],["mat-button","","mat-flat-button","","type","submit","color","primary",1,"form__submit",3,"disabled"],[4,"ngIf"],[1,"form__or"],[1,"login__options"],["routerLink","/auth/login"],[1,"image"],["src","assets/images/login.png","alt","login image"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),t.EFF(4,"Registrarse"),t.k0s(),t.j41(5,"span"),t.EFF(6,"Por favor ingrese sus datos"),t.k0s()(),t.j41(7,"form",3),t.bIt("ngSubmit",function(){return i.register()}),t.j41(8,"mat-form-field",4)(9,"mat-label"),t.EFF(10,"RUC de la empresa"),t.k0s(),t.nrm(11,"input",5),t.k0s(),t.j41(12,"mat-form-field",6)(13,"mat-label"),t.EFF(14,"Razon social"),t.k0s(),t.nrm(15,"input",7),t.k0s(),t.j41(16,"mat-form-field",6)(17,"mat-label"),t.EFF(18,"Direccion de la sede principal"),t.k0s(),t.nrm(19,"input",8),t.k0s(),t.j41(20,"mat-form-field",6)(21,"mat-label"),t.EFF(22,"Sector"),t.k0s(),t.nrm(23,"input",9),t.k0s(),t.j41(24,"mat-form-field",6)(25,"mat-label"),t.EFF(26,"Constrase\xf1a"),t.k0s(),t.nrm(27,"input",10),t.k0s(),t.j41(28,"button",11),t.DNE(29,M,2,0,"span",12),t.DNE(30,b,2,0,"span",12),t.DNE(31,P,2,0,"span",12),t.k0s(),t.j41(32,"div",13),t.nrm(33,"hr"),t.j41(34,"span"),t.EFF(35," O "),t.k0s(),t.nrm(36,"hr"),t.k0s()(),t.j41(37,"div",14)(38,"p"),t.EFF(39,"\xbfTienes una cuenta?"),t.k0s(),t.j41(40,"a",15),t.EFF(41,"Login"),t.k0s()()(),t.j41(42,"div",16),t.nrm(43,"img",17),t.k0s()()),2&o&&(t.R7$(7),t.Y8G("formGroup",i.registerForm),t.R7$(21),t.Y8G("disabled","loading"===i.requestStatus),t.R7$(1),t.Y8G("ngIf","loading"===i.requestStatus),t.R7$(1),t.Y8G("ngIf","init"===i.requestStatus),t.R7$(1),t.Y8G("ngIf","failed"===i.requestStatus))},dependencies:[c.bT,s.Wk,n.qT,n.me,n.BC,n.cb,n.tU,n.j4,n.JD,g.fg,l.rl,l.nJ,p.$z],styles:[".content[_ngcontent-%COMP%]{width:90%;max-width:1200px;margin:0 auto;display:flex;flex-direction:row;gap:2rem;align-items:center;justify-content:center;height:100%}.login[_ngcontent-%COMP%]{max-width:464px;display:flex;flex-direction:column;padding:0 64px;flex-grow:1;gap:32px}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.form[_ngcontent-%COMP%]   .form__field[_ngcontent-%COMP%]{display:block;width:100%;flex-grow:1}.form[_ngcontent-%COMP%]   .form__field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.form[_ngcontent-%COMP%]   .form__submit[_ngcontent-%COMP%]{background-color:#3566e7;margin-bottom:20px;color:#fff}.form__or[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center}.form__or[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{flex-grow:1;flex-shrink:1}.form__or[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 8px}.login__options[_ngcontent-%COMP%]{display:flex;gap:8px}.login__options[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;color:var(--primary-color)}.image[_ngcontent-%COMP%], .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:none}@media (width>=728px){.image[_ngcontent-%COMP%]{display:block;overflow:hidden;max-width:800.375px;height:100%;box-shadow:-27px 0 44.1px -13px #3a6beb5c}.image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;width:100%;height:100%;object-fit:cover}}"]})}}return e})()},{path:"**",redirectTo:"login"}]}];let y=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[s.iI.forChild(O),s.iI]})}}return e})(),k=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[c.MD,y,n.X1,g.fS,l.RG,p.Hl]})}}return e})()}}]);